<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Internal URL Health</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">
<nav class="mb-4">
    <a class="btn btn-primary me-2" href="/dashboard">Dashboard</a>
    <a class="btn btn-secondary me-2" href="/raw">Raw View</a>
    <a class="btn btn-dark" href="/feign-logs">Feign Logs</a>
</nav>

<h1 class="mb-4">ðŸ©º Internal URL Health</h1>
<table class="table table-bordered table-hover">
    <thead class="table-dark">
    <tr>
        <th>URL</th>
        <th>Status</th>
        <th>Last Checked</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="url : ${urlPage.content}">
        <td th:text="${url.url}"></td>
        <td>
            <span th:if="${url.reachable}" class="badge bg-success">OK</span>
            <span th:if="${!url.reachable}" class="badge bg-danger">DOWN</span>
        </td>
        <td th:text="${#temporals.format(url.lastChecked, 'yyyy-MM-dd HH:mm:ss')}"></td>
    </tr>
    </tbody>
</table>

<!-- Pagination control -->
<nav th:if="${urlPage.totalPages > 1}">
    <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${urlPage.first}? 'disabled'">
            <a class="page-link" th:href="@{/dashboard(page=${urlPage.number - 1})}">Previous</a>
        </li>
        <li class="page-item" th:each="i : ${#numbers.sequence(0, urlPage.totalPages - 1)}"
            th:classappend="${urlPage.number == i}? 'active'">
            <a class="page-link" th:href="@{/dashboard(page=${i})}" th:text="${i + 1}"></a>
        </li>
        <li class="page-item" th:classappend="${urlPage.last}? 'disabled'">
            <a class="page-link" th:href="@{/dashboard(page=${urlPage.number + 1})}">Next</a>
        </li>
    </ul>
</nav>

</table>
</body>
</html>
